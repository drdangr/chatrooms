# Как пересоздать эмбединги для всех сообщений

## Способ 1: Через консоль браузера (Рекомендуется)

1. Откройте приложение в браузере
2. Откройте консоль разработчика (F12 → Console)
3. Вставьте и выполните:

```javascript
// Импортируйте функцию (нужно сделать это через динамический импорт)
import('/lib/backfill-all-embeddings.js').then(({ backfillAllEmbeddings }) => {
  backfillAllEmbeddings()
    .then(() => console.log('✅ Все эмбединги пересозданы!'))
    .catch(err => console.error('❌ Ошибка:', err))
})
```

Или для конкретной комнаты:

```javascript
import('/lib/backfill-all-embeddings.js').then(({ backfillRoomEmbeddings }) => {
  const roomId = 'YOUR_ROOM_ID' // Замените на ID комнаты
  backfillRoomEmbeddings(roomId)
    .then(() => console.log('✅ Эмбединги для комнаты пересозданы!'))
    .catch(err => console.error('❌ Ошибка:', err))
})
```

## Способ 2: Добавить кнопку в UI (опционально)

Можно добавить кнопку "Пересоздать эмбединги" в настройках комнаты для администраторов.

## Стоимость

- **1000 сообщений** = ~$0.10 (OpenAI text-embedding-3-small)
- **10000 сообщений** = ~$1.00

## Время выполнения

- **100 сообщений** ≈ 1-2 минуты
- **1000 сообщений** ≈ 10-15 минут

Процесс идет в фоновом режиме с задержками между батчами для избежания rate limits.

