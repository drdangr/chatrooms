# Инструкция по применению миграции базы данных

## Шаги для создания схемы БД в Supabase

1. Откройте ваш проект в [Supabase Dashboard](https://supabase.com/dashboard)

2. Перейдите в раздел **SQL Editor** (в левом меню)

3. Нажмите кнопку **New Query** (Новый запрос)

4. Скопируйте весь содержимое файла `supabase/migrations/001_initial_schema.sql`

5. Вставьте SQL код в редактор

6. Нажмите кнопку **Run** (или `Ctrl+Enter` / `Cmd+Enter`)

7. Проверьте, что миграция выполнена успешно:
   - Откройте раздел **Table Editor**
   - Должны быть видны таблицы: `users`, `rooms`, `messages`, `files`

## Проверка результата

После применения миграции проверьте:

- ✅ Все таблицы созданы
- ✅ Индексы созданы (можно проверить в Database > Indexes)
- ✅ Row Level Security (RLS) включен для всех таблиц
- ✅ Политики безопасности (Policies) созданы

## Что делает эта миграция

- Создает таблицу `users` для дополнительной информации о пользователях
- Создает таблицу `rooms` для чат-комнат
- Создает таблицу `messages` для сообщений в чатах
- Создает таблицу `files` для загруженных файлов
- Настраивает связи между таблицами (foreign keys)
- Создает индексы для оптимизации запросов
- Настраивает Row Level Security (RLS) и политики доступа
- Создает триггер для автоматического создания профиля пользователя при регистрации

